<h2 style="margin-bottom: 1.5rem;">My Items</h2>

<% @items_grouped_by_category.each do |category, items| %>
  <h3 style="margin-top: 2rem; font-weight: bold;"><%= category.pluralize.capitalize %></h3>

  <div id="carousel-<%= category.parameterize %>" style="display: flex; overflow-x: auto; gap: 20px; padding: 10px 0; scroll-snap-type: x mandatory;">
    <% items.each do |item| %>
      <div style="flex: 0 0 auto; scroll-snap-align: start; width: 140px; text-align: center; background: #fff; padding: 10px; border-radius: 10px; box-shadow: 0 1px 4px rgba(0,0,0,0.1); transition: transform 0.2s; cursor: pointer;"
           onclick="window.location='<%= item_path(item) %>'">
        <% if item.image.attached? %>
          <%= image_tag item.image, style: "width: 100%; height: 130px; object-fit: cover; border-radius: 6px;" %>
        <% else %>
          <div style="width: 100%; height: 130px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #aaa; border-radius: 6px;">
            No Image
          </div>
        <% end %>
        <h4 style="margin-top: 8px; font-size: 0.9rem;"><%= item.name %></h4>
      </div>
    <% end %>
  </div>

  <div style="display: flex; justify-content: space-between; margin: 8px 0;">
    <button 
      onclick="document.getElementById('carousel-<%= category.parameterize %>').scrollBy({ left: -220, behavior: 'smooth' })" 
      style="font-size: 20px; padding: 4px 8px; border-radius: 4px; border: 1px solid #ccc; background: #f8f8f8;">
      ⬅️
    </button>
    <button 
      onclick="document.getElementById('carousel-<%= category.parameterize %>').scrollBy({ left: 220, behavior: 'smooth' })" 
      style="font-size: 20px; padding: 4px 8px; border-radius: 4px; border: 1px solid #ccc; background: #f8f8f8;">
      ➡️
    </button>
  </div>
<% end %>

<hr class="my-5">

<h3 style="margin-top: 2rem;">My Outfits</h3>

<div style="display: flex; overflow-x: auto; gap: 20px; scroll-snap-type: x mandatory; padding: 10px 0;">
  <% @list_of_outfits.each do |outfit| %>
    <div style="min-width: 300px; flex: 0 0 auto; scroll-snap-align: start; border: 1px solid #ddd; border-radius: 8px; padding: 16px; background: #fafafa; box-shadow: 0 1px 4px rgba(0,0,0,0.05);">
      <h4><%= outfit.name %></h4>

      <p><strong>Occasion:</strong> <%= outfit.occasion.presence || "—" %></p>
      <p><strong>Season:</strong> <%= outfit.season.presence || "—" %></p>
      <p><strong>Items:</strong></p>
      <ul style="padding-left: 20px;">
        <% outfit.items.each do |item| %>
          <li><%= item.name %></li>
        <% end %>
        
      </ul>
    </div>
  <% end %>
</div>
