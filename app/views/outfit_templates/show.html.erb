<h1>
  Outfit #<%= @the_outfit.id %> details
</h1>


<article>
  <div>
    <a href="/outfits">
      Go back
    </a>
  </div>

  <div>
    <a href="/delete_outfit/<%= @the_outfit.id %>">
      Delete outfit
    </a>
  </div>
  <dl>
    <dt>
      Name
    </dt>
    <dd>
      <%= @the_outfit.name %>
    </dd>

    <dt>
      Occasion
    </dt>
    <dd>
      <%= @the_outfit.occasion %>
    </dd>

    <dt>
      Season
    </dt>
    <dd>
      <%= @the_outfit.season %>
    </dd>

    <dt>
      User
    </dt>
    <dd>
      <%= @the_outfit.user_id %>
    </dd>

    <dt>
      Created at
    </dt>
    <dd>
      <%= time_ago_in_words(@the_outfit.created_at) %> ago
    </dd>

    <dt>
      Updated at
    </dt>
    <dd>
      <%= time_ago_in_words(@the_outfit.updated_at) %> ago
    </dd>
  </dl>
</article>

<hr>


<article>
  <header>
    <h2>
      Edit outfit
    </h2>
  </header>

  <form action="/modify_outfit/<%= @the_outfit.id %>"  method="post" >
    <div>
      <label for="name_box">
        Name
      </label>

      <input type="text" id="name_box" name="query_name" value="<%= @the_outfit.name %>">
    </div>

    <div>
      <label for="occasion_box">
        Occasion
      </label>

      <input type="text" id="occasion_box" name="query_occasion" value="<%= @the_outfit.occasion %>">
    </div>

    <div>
      <label for="season_box">
        Season
      </label>

      <input type="text" id="season_box" name="query_season" value="<%= @the_outfit.season %>">
    </div>

    <div>
      <label for="user_id_box">
        User
      </label>

      <input type="text" id="user_id_box" name="query_user_id" value="<%= @the_outfit.user_id %>">
    </div>

    <button type="submit">
      Update outfit
    </button>
  </form>
</article>

<hr>

<% ordered_categories = ["Top", "Pant", "Skirt", "Dress", "Outerwear", "Shoes", "Accessories"] %>

<h2>Items in This Outfit</h2>

<% ordered_categories.each do |category| %>
  <% items_in_category = @the_outfit.items.select { |item| item.category == category } %>
  <% if items_in_category.any? %>
    <h3><%= category.pluralize %></h3>
    <div style="display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 1.5rem;">
      <% items_in_category.each do |item| %>
        <div style="text-align: center;">
          <% if item.image.present? %>
            <img src="<%= item.image.url %>" alt="<%= item.name %>" style="width: 100px; height: auto; border-radius: 6px;">
          <% else %>
            <div style="width: 100px; height: 100px; background-color: #eee; border-radius: 6px;"></div>
          <% end %>
          <div style="margin-top: 0.5rem;"><%= item.name %></div>
        </div>
      <% end %>
    </div>
  <% end %>
<% end %>
